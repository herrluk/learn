# 基础

使用终端ssh连接主机：

```
ssh root@123.57.50.232
```

然后输入root用户的密码就行了。

1. 学习基本指令
   * 文件操作指令
   * 编辑工具
   * 用户管理
2. linux系统配置
   * 环境变量，网络配置，服务配置
3. linux环境下搭建开发环境
   * 大数据 JavaEE Python 等
4. 编写shell脚本，对Linux服务器维护
5. 安全设置，防止攻击，保证服务器正常运行，系统调优
6. 深入理解Linux，对内核有研究，掌握大型网站架构、熟悉各环节部署方法



# Linux基本目录机构

## 1. 基本介绍

* Linux的文件系统采用级层式子的树状目录结构，
* 最上层是根目录 `/`
* **Linux世界里，一切皆文件。**
  ![目录结构](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:15.jpg)

## 2. 目录用途

* `/bin：` 是Binary的缩写，这个目录存放着最经常使用的命令。
* `/sbin`：s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。
* `/home：`存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
* `/root：`该目录为系统管理员，也称作超级权限者的用户主目录。
* `/lib`：系统开机所需要最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。
* `/lost+found`：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
* `/etc`：所有的系统管理所需要的配置文件和子目录my.conf。
* `/usr/local`：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录。
* `/boot：`存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。
* `/proc`：这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息。
* `/srv`：service的缩写，该目录存放一些服务启动之后需要提供的数据。
* `/sys`：这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs。
* `/tmp`：这个目录是用来存放一些临时文件的。
* `/dev`：类似windows的设备管理器，把所有的硬件用文件的形式存储。
* `/media：`linux系统会自动识别一些设备，例如U盘光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。
* `/mnt：`系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了。
* `/opt：`这是给主机额外安装软件所摆放的目录，如安装ORACLE数据库就可放到该目录下。默认为空。
* `/usr/local`：这是另一个给主机额外安装软件所安装的目录，一般是通过编译源码的方式安装的程序。
* `/var：`这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下，包括各种日志文件。
* `/selinux`：SELinux是一种安全子系统，它能控制程序只能访问特定文件。

## 3. 总结

1. Linux的目录中有且只有一个根目录。
2. Linux的各个目录存放的内容是规划好，不用乱放文件。
3. Linux是以文件的形式管理我们的设备，因此linux系统，一切皆为文件。
4. Linux的各个文件目录下存放什么内容，必须有一个认识。

# vi和vim编辑器

## 1. vi和vim的基本介绍

* 所有Linux系统都会内置vi文本编辑器
* vim是vi的升级版，可以主动以字体颜色分辨语法的正确性，代码补完和编译，错误跳转等功能。

## 2. vi和vim的三种模式

### 2.1 正常模式

* 在正常模式下，我们可以使用快捷键。
* 用vim打开一个文件就直接进入一般模式
* 可以使用【删除字符】或【删除整行】来处理文档内容，也可以使用【复制黏贴按钮】

### 2.2 插入/编辑模式

* 在这个模式下，可以编辑文件内容。
* 按下i,I,o,O,a,A,r,R等字母就可进入编辑模式

### 2.3 命令行模式

* 在这个模式中，可以利用指令完成读取，存盘，替换，离开，显示行号的等动作。
* wq保存退出
* q无修改直接退出
* q!不保存修改直接退出

### 2.4 三种模式转换示意图

![image-20220808151445799](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:17.png)



## 3. Vim 的常见指令案例

1. `yy`：拷贝当前行
2. `5yy`：拷贝当前5行
3. `dd`：删除当前行
4. `5dd`：删除当前行向下的5行
5. 在文件中查找某个单词：命令行输入 `/（查找内容）`，按n查找下一个
6. 设置文件行号：`:set nu`，取消文件行号：`:set nonu`
7. 编辑文件，正常模式下使用快捷键到达文档最末行：`g`，最首行：`gg`
8. 撤销输入：在正常模式下输入`u`
9. 编辑文件，光标移动到某行：`shift+g`
   * 显示行号：`set nu`
   * 输入行号这个数
   * 输入`shift+g`

## 4. vim其他常见指令补充

### 4.1 文件命令

| 指令                             | 说明                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| vim [file1 file2 file3 ...]      | 打开单个或多个文件                                           |
| :open file                       | 在vim窗口中打开一个新文件                                    |
| :split file                      | 在新窗口中打开文件（split打开的窗口都是横向的，使用vsplit可以纵向打开窗口。） |
| Ctrl+ww                          | 移动到下一个窗口                                             |
| Ctrl+wj                          | 移动到下方的窗口                                             |
| Ctrl+wk                          | 移动到上方的窗口                                             |
| :close                           | 最后一个窗口不能使用此命令，可以防止意外退出vim。            |
| :only                            | 关闭所有窗口，只保留当前窗口                                 |
| :bn                              | 切换到下一个文件                                             |
| :bp                              | 切换到上一个文件                                             |
| :args                            | 查看当前打开的文件列表，当前正在编辑的文件会用[]括起来       |
| :e <ftp://192.168.10.76/abc.txt> | 打开远程文件，比如ftp或者share folder                        |

### 4.2 普通模式

#### 4.2.1 插入命令

| 指令 | 说明                 |
| ---- | -------------------- |
| i    | 在当前位置生前插入   |
| I    | 在当前行首插入       |
| a    | 在当前位置后插入     |
| A    | 在当前行尾插入       |
| o    | 在当前行之后插入一行 |
| O    | 在当前行之前插入一行 |

#### 4.2.2 游标移动

| 指令            | 说明                                                      |
| --------------- | --------------------------------------------------------- |
| gg              | 移动到文件头。 = [[                                       |
| G（shift + g）  | 移动到文件尾。 = ]]                                       |
| 行數 → G        | 移動到第 n 行                                             |
| 冒号+行号，回车 | 比如跳到240行就是 :240回车                                |
| h               | 左移一个字符                                              |
| l               | 右移一个字符，这个命令很少用，一般用w代替。               |
| k               | 上移一个字符                                              |
| j               | 下移一个字符                                              |
| w               | 向前移动一个单词（光标停在单词首部）                      |
| b               | 向后移动一个单词 2b 向后移动2个单词                       |
| e               | 同w，只不过是光标停在单词尾部                             |
| ge              | 同b，光标停在单词尾部。                                   |
| ^               | 移动到本行第一个非空白字符上。                            |
| 0               | 移动到本行第一个字符上                                    |
| HOME            | 移动到本行第一个字符。同0健。                             |
| $               | 移动到行尾 3$ 移动到下面3行的行尾                         |
| f（find）       | fx将找到光标后第一个为x的字符，3fd将找到第三个为d的字符。 |
| F               | 同f，反向查找                                             |

#### 4.2.3 撤销和重做

| 指令     | 说明                         |
| -------- | ---------------------------- |
| u        | 撤销（Undo）                 |
| U        | 撤销对整行的操作             |
| Ctrl + r | 重做（Redo），即撤销的撤销。 |

#### 4.2.4 删除命令

| 指令                | 说明                                   |
| ------------------- | -------------------------------------- |
| x                   | 删除当前字符                           |
| 3x                  | 删除当前光标开始向后三个字符           |
| X                   | 删除当前字符的前一个字符。X=dh         |
| dl                  | 删除当前字符， dl=x                    |
| dh                  | 删除前一个字符                         |
| dd                  | 删除当前行                             |
| dj                  | 删除上一行                             |
| dk                  | 删除下一行                             |
| 10d                 | 删除当前行开始的10行。                 |
| D                   | 删除当前字符至行尾。D=d$               |
| d$                  | 删除当前字符之后的所有字符（本行）     |
| kdgg                | 删除当前行之前所有行（不包括当前行）   |
| jdG（jd shift + g） | 删除当前行之后所有行（不包括当前行）   |
| :1,10d              | 删除1-10行                             |
| :11,$d              | 删除11行及以后所有的行                 |
| :1,$d               | 删除所有行                             |
| J(shift + j)        | 删除两行之间的空行，实际上是合并两行。 |

#### 4.2.5 拷贝，剪贴和粘贴

| 指令        | 说明                                                         |
| ----------- | ------------------------------------------------------------ |
| yy          | 拷贝当前行                                                   |
| nyy         | 拷贝当前后开始的n行，比如2yy拷贝当前行及其下一行。           |
| p           | 在当前光标后粘贴,如果之前使用了yy命令来复制一行，那么就在当前行的下一行粘贴。 |
| shift+p     | 在当前行前粘贴                                               |
| :1,10 co 20 | 将1-10行插入到第20行之后。                                   |
| :1,$ co $   | 将整个文件复制一份并添加到文件尾部。                         |
| ddp         | 交换当前行和其下一行                                         |
| xp          | 交换当前字符和其后一个字符                                   |
| ndd         | 剪切当前行之后的n行。利用p命令可以对剪切的内容进行粘贴       |
| :1,10d      | 将1-10行剪切。利用p命令可将剪切后的内容进行粘贴。            |
| :1, 10 m 20 | 将第1-10行移动到第20行之后。                                 |

正常模式下按v（逐字）或V（逐行）进入可视模式，然后用jklh命令移动即可选择某些行或字符，再按y即可复制

#### 4.2.6 退出命令

| 指令 | 说明                           |
| ---- | ------------------------------ |
| :wq  | 保存并退出                     |
| ZZ   | 保存并退出                     |
| :q!  | 强制退出并忽略所有更改         |
| :e!  | 放弃所有修改，并打开原来文件。 |
| :q   | 未修改直接退出                 |

#### 4.2.7 注释命令

perl程序中#开始的行为注释，所以要注释某些行，只需在行首加入#

| 指令        | 说明                     |
| ----------- | ------------------------ |
| 3,5 s/^/#/g | 注释第3-5行              |
| 3,5 s/^#//g | 解除3-5行的注释          |
| 1,$ s/^/#/g | 注释整个文档。           |
| :%s/^/#/g   | 注释整个文档，此法更快。 |

### 4.3 执行shell命令

* :!command

| 指令                | 说明                                          |
| ------------------- | --------------------------------------------- |
| :!ls                | 列出当前目录下文件                            |
| :!perl -c script.pl | 检查perl脚本语法，可以不用退出vim，非常方便。 |
| :!perl script.pl    | 执行perl脚本，可以不用退出vim，非常方便。     |
| :suspend或Ctrl - Z  | 挂起vim，回到shell，按fg可以返回vim。         |

### 4.4 帮助命令

| 指令             | 说明                                                         |
| ---------------- | ------------------------------------------------------------ |
| :help or F1      | 显示整个帮助                                                 |
| :help xxx        | 显示xxx的帮助，比如 :help i, :help CTRL-[（即Ctrl+[的帮助）。 |
| :help 'number'   | Vim选项的帮助用单引号括起                                    |
| :help \<Esc\>    | 特殊键的帮助用<>扩起                                         |
| :help -t         | Vim启动参数的帮助用-                                         |
| ：help i_\<Esc\> | 插入模式下Esc的帮助，某个模式下的帮助用模式_主题的模式       |

帮助文件中位于||之间的内容是超链接，可以用Ctrl+]进入链接，Ctrl+o（Ctrl + t）返回

### 4.5 其他非编辑命令

|     指令     | 说明                                                         |
| :----------: | :----------------------------------------------------------- |
|      .       | 重复前一次命令                                               |
| :set ruler?  | 查看是否设置了ruler，在.vimrc中，使用set命令设制的选项都可以通过这个命令查看 |
| :scriptnames | 查看vim脚本文件的位置，比如.vimrc文件，语法文件及plugin等。  |
|  :set list   | 显示非打印字符，如tab，空格，行尾等。如果tab无法显示，请确定用set lcs=tab:>-命令设置了.vimrc文件，并确保你的文件中的确有tab，如果开启了 expandtab，那么tab将被扩展为空格。 |

* Vim教程
  * 在Unix系统上 $ vimtutor
  * 在Windows系统上 :help tutor

* 录制宏:
  * 按q键加任意字母开始录制，再按q键结束录制（这意味着vim中的宏不可嵌套），使用的时候@加宏名，比如qa。。。q录制名为a的宏，@a使用这个宏。

* :syntax 列出已经定义的语法项
* :syntax clear 清除已定义的语法规则
* :syntax case match 大小写敏感，int和Int将视为不同的语法元素
* :syntax case ignore 大小写无关，int和Int将视为相同的语法元素，并使用同样的配色方案

## 5. Vim拓展教程

# 关机、重启和用户登录注销

## 1. 关机&重启命令

### 1.1 shutdown

* shutdown -h now：表示立即关机
* shutdown -h 1：表示1分钟后关机
* shutdown -r now：立即重启

### 1.2 halt

* halt：直接使用，关机

### 1.3 reboot

* reboot 重启系统

### 1.4 sync

* sync：把内存的数据同步到磁盘上

> 当我们关机或者重启时，都应该先执行一下sync，防止数据丢失。

## 2. 用户登录注销

* 登录时少用root账号登录，以避免操作失误的损失
* 平时可登录普通账户，再用“su - 用户名”切换成管理员登录

### 2.1 logout

* logout：注销用户

> 在图形运行级别无效，在运行级别3有效。

# 用户管理

## 1. 基本用户管理

> * Linux系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。
> * 用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。
> * 每个用户账号都拥有一个唯一的用户名和各自的口令。
> * 要完成的工作主要有如下几个方面：
>   * 用户账号的添加、删除与修改。
>   * 用户口令的管理。
>   * 用户组的管理。

### 1.1 添加用户

> 添加用户：useradd [选项] 用户名。

#### 1.1.1 参数说明

* 选项:
  * -c comment 指定一段注释性描述。
  * -d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。
  * -g 用户组 指定用户所属的用户组。
  * -G 用户组，用户组 指定用户所属的附加组。
  * -s Shell文件 指定用户的登录Shell。
  * -u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号。
  * -f [缓冲天数] 指定在密码过期后多少天即关闭该帐号。
  * -e 有效期限 指定帐号的有效期限；
  * -M：不要自动建立用户的登入目录；

* 用户名:
  * 指定新账号的登录名。

#### 1.1.2 实例

1. useradd –d  /home/sam -m sam
   * 此命令创建了一个用户sam，其中-d和-m选项用来为登录名sam产生一个主目录 /home/sam（/home为默认的用户主目录所在的父目录）。
2. useradd -s /bin/sh -g group –G adm,root gem
   * 新建了一个用户gem，该用户的登录Shell是 /bin/sh，它属于group用户组，同时又属于adm和root用户组，其中group用户组是其主组。

### 1.2 用户口令的管理

> 指定和修改用户口令: passwd 选项 用户名

#### 1.2.1 参数说明

* 选项：
  * -l 锁定口令，即禁用账号。
  * -u 口令解锁。
  * -d 使账号无口令。
  * -f 强迫用户下次登录时修改口令。

#### 1.2.2 注意事项

* 如果默认用户名，则修改当前用户的口令。
  * 假设当前用户是sam，则下面的命令修改该用户自己的口令：passwd sam
* 普通用户修改自己的口令时，passwd命令会先询问原口令，验证后再要求用户输入两遍新口令，如果两次输入的口令一致，则将这个口令指定给用户；
* 超级用户为用户指定口令时，就不需要知道原口令。

#### 1.2.3 案例

1. passwd -l sam
   * 用 -l(lock) 选项锁定某一用户，使其不能登录
2. passwd -d sam
   * 为用户指定空口令

### 1.3 删除帐号

> 删除帐号: userdel 选项 用户名

#### 1.3.1 注意事项

* 常用的选项是 -r，它的作用是把用户的主目录一起删除。
  * userdel -r sam

### 1.4 修改帐号

> 修改已有用户的信息: usermod 选项 用户名

#### 1.4.1 注意事项

* 常用的选项包括-c, -d, -m, -g, -G, -s, -u以及-o等，这些选项的意义与useradd命令中的选项一样，可以为用户指定新的资源值。

### 1.5 查询用户信息

* 查询用户信息: id 用户名
  * 用户不存在是返回“无此用户”
* 查看当前用户/登录用户：who am i

### 1.6 切换用户

* 切换用户：su - 切换用户名
  * 从权限高切换到权限低的用户不需要输密码。
  * 返回切换前的用户：exit

## 2. 用户组的管理

> 每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同Linux 系统对用户组的规定有所不同，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。
> 用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对/etc/group文件的更新。

### 2.1 增加一个新的用户组

> 增加一个新的用户组: groupadd 选项 用户组

#### 2.1.1 说明

* 选项有：
  * -g GID 指定新用户组的组标识号（GID）。
  * -o 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同。

#### 2.1.2 案例

1. groupadd -g 101 group2
   * 向系统中增加了一个新组group1，新组的组标识号是在当前已有的最大组标识号的基础上加1。
2. groupadd -g 101 group2
   * 向系统中增加了一个新组group2，同时指定新组的组标识号是101。

### 2.2 删除用户组

> 删除用户组: groupmod 选项 用户组

#### 2.1.2 说明

* 选项有：
  * -g GID 为用户组指定新的组标识号。
  * -o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。
  * -n新用户组 将用户组的名字改为新名字

#### 2.1.3 案例

1. groupmod -g 102 group2
   * 将组group2的组标识号修改为102。
2. groupmod –g 10000 -n group3 group2
   * 将组group2的标识号改为10000，组名修改为group3。

### 2.3 组的切换

> 用户可以在登录后，使用命令newgrp切换到其他用户组，这个命令的参数就是目的用户组。例如：
>
> * $ newgrp root
>   * 这条命令将当前用户切换到root用户组，前提条件是root用户组确实是该用户的主组或附加组。类似于用户账号的管理，用户组的管理也可以通过集成的系统管理工具来完成。

## 3. 与用户账号有关的系统文件

### 3.1 /etc/passwd 文件

> 用户（user）的配置文件，记录用户的各种信息。

* 每行的含义：

  1. "用户名"是代表用户账号的字符串。

     * 通常长度不超过8个字符，并且由大小写字母和/或数字组成。登录名中不能有冒号\(:\)，因为冒号在这里是分隔符。
     * 为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(+)打头。

  2. “口令”一些系统中，存放着加密后的用户口令字。

     * 虽然这个字段存放的只是用户口令的加密串，不是明文，但是由于/etc/passwd文件对所有用户都可读，所以这仍是一个安全隐患。因此，现在许多Linux 系统（如SVR4）都使用了shadow技术，把真正的加密后的用户口令字存放到/etc/shadow文件中，而在/etc/passwd文件的口令字段中只存放一个特殊的字符，例如“x”或者“*”。

  3. “用户标识号”是一个整数，系统内部用它来标识用户。

     * 一般情况下它与用户名是一一对应的。如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。
     * 通常用户标识号的取值范围是0～65 535。0是超级用户root的标识号，1～99由系统保留，作为管理账号，普通用户的标识号从100开始。在Linux系统中，这个界限是500。

  4. “组标识号”字段记录的是用户所属的用户组。

     * 它对应着/etc/group文件中的一条记录。

  5. “注释性描述”字段记录着用户的一些个人情况。

     * 例如用户的真实姓名、电话、地址等，这个字段并没有什么实际的用途。在不同的Linux 系统中，这个字段的格式并没有统一。在许多Linux系统中，这个字段存放的是一段任意的注释性描述文字，用做finger命令的输出。

  6. “主目录”，也就是用户的起始工作目录。

     * 它是用户在登录到系统之后所处的目录。在大多数系统中，各用户的主目录都被组织在同一个特定的目录下，而用户主目录的名称就是该用户的登录名。各用户对自己的主目录有读、写、执行（搜索）权限，其他用户对此目录的访问权限则根据具体情况设置。

  7. 用户登录后，要启动一个进程，负责将用户的操作传给内核，这个进程是用户登录到系统后运行的命令解释器或某个特定的程序，即Shell。

     * Shell是用户与Linux系统之间的接口。Linux的Shell有许多种，每种都有不同的特点。常用的有sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)等。
     * 系统管理员可以根据系统情况和用户习惯为用户指定某个Shell。如果不指定Shell，那么系统使用sh为默认的登录Shell，即这个字段的值为/bin/sh。
     * 用户的登录Shell也可以指定为某个特定的程序（此程序不是一个命令解释器）。
     * 利用这一特点，我们可以限制用户只能运行指定的应用程序，在该应用程序运行结束后，用户就自动退出了系统。有些Linux 系统要求只有那些在系统中登记了的程序才能出现在这个字段中。

  8. 系统中有一类用户称为伪用户（pseudo users）。

     * 这些用户在/etc/passwd文件中也占有一条记录，但是不能登录，因为它们的登录Shell为空。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求。

     ![3.4etcpasswd文件.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:18.jpg)

### 3.2 /etc/shadow 文件

>口令配置文件

* 每行的含义：

  1. "登录名"是与/etc/passwd文件中的登录名相一致的用户账号

  2. "口令"字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；如果含有不属于集合 { ./0-9A-Za-z }中的字符，则对应的用户不能登录。

  3. "最后一次修改时间"表示的是从某个时刻起，到用户最后一次修改口令时的天数。时间起点对不同的系统可能不一样。例如在SCO Linux 中，这个时间起点是1970年1月1日。

  4. "最小时间间隔"指的是两次修改口令之间所需的最小天数。

  5. "最大时间间隔"指的是口令保持有效的最大天数。

  6. "警告时间"字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。

  7. "不活动时间"表示的是用户没有登录活动但账号仍能保持有效的最大天数。

  8. "失效时间"字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。

     ![3.4etcshadow.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:18.jpg)

### 3.3 /etc/group 文件

>组（group）的配置文件，用户组的所有信息都存放在/etc/group文件中。

* 每行含义：

  1. "组名"是用户组的名称，由字母或数字构成。与/etc/passwd中的登录名一样，组名不应重复。
  2. "口令"字段存放的是用户组加密后的口令字。一般Linux 系统的用户组都没有口令，即这个字段一般为空，或者是*。
  3. "组标识号"与用户标识号类似，也是一个整数，被系统内部用来标识组。
  4. "组内用户列表"是属于这个组的所有用户的列表/b]，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组。

  ![3.4etcgroup.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:19.jpg)

# 实用指令

## 1. 指定运行级别（7个级别）

* 0.关机
* 1.单用户【找回丢失密码】
* 2.多用户状态没有网络服务
* 3.多用户状态有网络服务
* 4.系统未使用保留给用户
* 5.图形界面
* 6.系统重启

* 系统的运行级别配置文件：/etc/inittab
  ![3.5运行级别指令.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:19.jpg)
* 切换到指定运行级别的指令：init [012356]

## 2. 帮助指令

### 2.1 man获得帮助信息

> man [命令或配置文件]

* 例如:man ls

### 2.2 help指令

> help [命令或配置文件]

## 3. 文件目录类指令

### 3.1 文件剪贴删除复制重名等

* pwd：Print Working Directory，显示当前工作目录的绝对路径。
* ls：-a：显示当前目录所有的文件和目录，包括隐藏的；
  * -l：以列表的方式显示信息。
* cd：cd ~：回到自己的家目录；cd …：回到当前目录的上一级目录。
* mkdir：创建目录；-p：创建多级目录。
* rmdir：删除空目录。rmdir不能删除非空的目录。如果需要删除非空的目录，需要使用rm -rf。
* cp：拷贝文件到指定目录；
  * -r：递归复制整个文件夹。强制覆盖不提示的方法：
  * cp命令改为\cp
* rm：移除文件或目录；
  * -r：递归删除整个文件夹；
  * -f：强制删除不提示。
* mv：移动文件与目录或重命名，两种功能！
* touch：创建空文件。可以一次性创建多个文件
* ln 给文件创建一个软连接
  * 用法:ln -s[源文件或目录][软连接名]

### 3.2 文件查看

* cat：查看文件内容。只能浏览文件，而不能修改文件。
  * -n：显示行号。
  * 结尾加上 | more：分页显示，不会全部一下显示完。
* more：是一个基于VI编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。more还内置了很多快捷键：
  * 空白键（Space）：向下翻一页
  * Enter：向下翻一行
  * q：立刻离开more，不再显示该文件内容
  * Ctrl + F：向下滚动一屏
  * Ctrl + B：返回上一屏
  * = :输出当前行的行号
  * :f 输出文件名和当前行的行号
* less：用来分屏查看文件内容，与more相似，但是更强大，支持各种显示终端。less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容。对于显示大型文件具有较高的效率。
* head：显示文件的开头部分。-n 5：看前面5行内容。
* tail：输出文件中尾部的内容。
  * -n 5：看后面5行内容。
  * -f：时事追踪该文档的所有更新
* \>指令：输出重定向。如果不存在会创建文件，否则会将原来的文件内容覆盖。
* \>>指令：追加。如果不存在会创建文件，否则不会覆盖原来的文件内容，而是追加到文件的尾部。
* echo：输出内容到控制台。
* history：查看历史指令

### 3.3 时间和日期

* date：显示当前日期和时间
  * date “+%Y”：显示当前年份
  * date “+%d”：显示当前月份
  * date “+%Y-%m-%d %H:%M:%S”：显示年-月-日 时：分：秒
  * 设置日期：date -s 字符串时间
* cal：查看日历指令；
  * cal [月] [年份]：显示某一年或月的日历

### 3.4 搜索查找类

* find：从指定目录向下递归的遍历其各个子目录，将满足条件的文件或者目录显示在终端。
  * find (搜索范围) -name (文件名)：按照指定的文件名查找模式查找文件。
  * find (搜索范围) -user (用户名)：按照指定的用户名查找模式查找文件。
  * find (搜索范围) -size (+多少/-多少/多少)：按照指定的文件大小查找模式查找文件（大于多少/小于多少/等于多少）
  * 查询 /目录下所有.txt的文件：find / -name *.txt
* locate：locate (搜索文件)
  * 可以快速定位文件路径。locate指令利用事先建立的系统中所有文件名称及路径的locate数据库实现快速定位给定的文件。
  * locate指令无需遍历整个文件系统，查询速度较快。为了保证查询结果的准确度，管理员必须定期更新locate时刻。
  * 在第一次运行之前，必须使用updatedb指令创建locate数据库。
* grep：过滤查找，表示将前一个命令的处理结果输出传递给后面的命令处理。经常跟管道一起使用。
  * grep [选项] 查找内容 源文件
  * -n：显示匹配行及行号。
  * -i：忽略大小写字母。
  * cat hello.txt | grep yes

### 3.5 压缩和解压类

* gzip/gunzip：压缩文件/解压
  * gzip (文件)：压缩为.gz文件，原来文件不保留。
  * gunzip (文件)：解压缩，同样也不保留源文件。
* zip/unzip：压缩文件/解压
  * zip [选项] (压缩后文件xxx.zip) (将要压缩的文件)
  * unzip [选项] (要解压的文件xxx.zip)
  * zip -r：递归压缩，即压缩目录
  * unzip -d (目录)：指定解压后的文件的存放目录
* tar：打包指令，最后打包后的文件是.tar.gz的文件
  * tar [选项] xxx.tar.gz (打包的内容)
  * -c：产生.tar打包文件
  * -v：显示详细信息
  * -f：指定压缩后的文件名
  * -z：打包同时压缩
  * -x：解压.tar文件
  * 压缩：tar -zcvf (压缩后文件名) (要压缩的文件)
  * 解压：tar -zxvf (要解压的文件)
  * 解压到指定目录：tar -zxvf (要解压的文件) -C (指定目录)，指定解压到的目录要存在。

## 4. 更多命令

[Linux命令大全](https://www.runoob.com/linux/linux-command-manual.html)



# **第** **6** 章 系统管理 

## **6.1 Linux** **中的进程和服务** 

计算机中，一个正在执行的程序或命令，被叫做“进程”（process）。 

启动之后一直存在、常驻内存的进程，一般被称作“服务”（service）。 

### 6.2 service服务管理（CentOS 6版本-了解）

*1 基本语法*

`service 服务名 start | stop | restart | status` 

*2 经验技巧*

查看服务的方法：/etc/init.d/服务名 ,发现只有两个服务保留在 service

```shell
[root@linux-study ~]# cd /etc/init.d
[root@linux-study init.d]# ls -al
drwxr-xr-x.  2 root root    37 1月  13 2022 .
drwxr-xr-x. 10 root root   127 12月 22 2021 ..
-rw-r--r--.  1 root root 18434 2月  15 2021 functions
-rw-r--r--.  1 root root  1161 12月 22 2021 README
[root@linux-study init.d]# 

```

## 6.4 systemctl （CentOS 7 版本-重点掌握） 

1） 基本语法 `systemctl start | stop | restart | status 服务名` 

2） 经验技巧 查看服务的方法：`/usr/lib/systemd/system`

3）案例实操 

（1）查看防火墙服务的状态  `systemctl status firewalld` 

（2）停止防火墙服务  `systemctl stop firewalld` 

（3）启动防火墙服务  `systemctl start firewalld` 

（4）重启防火墙服务  `systemctl restart firewalld`

6.5 systemctl 设置后台服务的自启配置 

1）基本语法 

`systemctl list-unit-files` （功能描述：查看服务开机启动状态） 

`systemctl disable service_name` （功能描述：关掉指定服务的自动启动） 

`systemctl enable service_name` （功能描述：开启指定服务的自动启动） 

2）案例实操 

1）开启/关闭 iptables(防火墙)服务的自动启动  

systemctl enable firewalld.service  

systemctl disable firewalld.service

# 组管理和权限管理

## 1. Linux组基本介绍

* Linux中每个用户属于一个组，不能独立于组以外。所以在Linux中每个文件存在组的概念：
  1. 所有者
  2. 所在组
  3. 其他组
  4. 改变用户所在组

## 2. 文件/目录所有者

> 一般为文件的创建者，谁创建了该文件，就自然的称为该文件的所有者。

* 查看文件所有者：ls -ahl
* 修改文件所有者：chown (用户名) (文件名)

## 3. 文件/目录所在组

> 当某个用户创建了一个文件之后，默认之歌文件所在组就是该用户所在的组

* 查看文件所有者：ls -ahl
* 修改文件所在组：chgrp (组名) (文件名)

## 4. 其他组

> 除文件的所有者和所在组的用户外，系统的其他用户都是文件的其他组

## 5. 文件属性

* ls -l中显示的内容如图所示
  ![3.6文件属性.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:20.jpg)

1. 在Linux中第一个字符代表这个文件是目录、文件或链接文件等等。
   * 当为[ d ]则是目录
   * 当为[ - ]则是文件；
   * 若是[ l ]则表示为链接文档(link file)；
   * 若是[ b ]则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；
   * 若是[ c ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。
2. 接下来的字符中，以三个为一组，且均为『rwx』 的三个参数的组合。[ r ]代表可读(read)、[ w ]代表可写(write)、[ x ]代表可执行(execute)。 要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现减号[ - ]而已。
   每个文件的属性由左边第一部分的10个字符来确定（如下图）。
    ![文件权限](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:20.png)

### 5.1 rwx权限详解

* rwx作用到文件：
  * r：read，可读。读取查看。
  * w：write，可以修改。但不代表可以删除该文件。删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件。
  * x：execute，可执行。可以被执行。
* rwx作用到目录：
  * r：可以读取，ls查看目录内容。
  * w：可以修改，目录内创建+删除+重命名目录。
  * x：可执行，可以进入该目录。

### 5.2 修改权限

#### 5.2.1 chgrp：更改文件属组

* chgrp [-R] 属组名 文件名
  * -R：递归更改文件属组，就是在更改某个目录文件的属组时，如果加上-R的参数，那么该目录下的所有文件的属组都会更改。

#### 5.2.2 chown：更改文件属主，也可以同时更改文件属组

> 语法:
>
> * chown [–R] 属主名 文件名
> * chown [-R] 属主名：属组名 文件名

#### 5.2.3 chmod：更改文件9个属性

* Linux文件属性有两种设置方法，一种是数字，一种是符号。
* Linux文件的基本权限就有九个，分别是owner/group/others三种身份各有自己的read/write/execute权限。
* 我们可以使用数字来代表各个权限，各权限的分数对照表如下：
  * r:4
  * w:2
  * x:1
* 每种身份(owner/group/others)各自的三个权限(r/w/x)分数是需要累加的，例如当权限为： [-rwxrwx---] 分数则是：
  * owner = rwx = 4+2+1 = 7
  * group = rwx = 4+2+1 = 7
  * others= --- = 0+0+0 = 0

##### 5.2.3.1 使用数字修改权限

* **chmod [-R] xyz 文件或目录**
  * xyz : 就是刚刚提到的数字类型的权限属性，为 rwx 属性数值的相加。
  * -R : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都会变更
  * 举例来说，如果要将.bashrc这个文件所有的权限都设定启用，那么命令如下：
    ![3.6更改文件属性.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:20.jpg)

##### 5.2.3.1 使用符号修改权限

* 我们就可以使用 u(user), g(group), o(others) 来代表三种身份的权限！
* 此外， a 则代表 all，即全部的身份。读写的权限可以写成 r, w, x，也就是可以使用下表的方式来看
  ![3.6符号修改权限.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:21.jpg)
* 举例说明
  ![3.6权限修改举例](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:21.jpg)

# 3.7定时任务调度

## 1. 任务调度原理

> crond任务调度：crontab进行定时任务调度  
> ![3.7定时调度原理](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:21.jpg)

* 使用方法：crontab [选项]
  * crontab [选项]
  * -e：编辑crontab定时任务
  * -i：查询crontab任务
  * -r：删除当前用户所有的crontab任务
  * -l：列出当前有哪些任务调度
  * service crond restart：重启任务调度
  * 当保存退出后就生效了
  * 参数细节说明

| 项目      | 含义                 | 范围                    |
| --------- | -------------------- | ----------------------- |
| 第一个“*” | 一小时当中的第几分钟 | 0-59                    |
| 第二个“*” | 一天当中的第几小时   | 0-23                    |
| 第三个“*” | 一个月当中的第几天   | 1-31                    |
| 第四个“*” | 一年当中的第几月     | 1-12                    |
| 第五个“*” | 一周当中的星期几     | 0-7（0和7都代表星期日） |

* 特殊符号说明
  * `\*：`代表任何时间。比如第一个*就代表一小时中每分钟都执行一次的意思。
  * `,：`代表不连续的时间。比如“0 8,12,16 \* * *命令”，就代表在每天的8点0分，12点0分，16点0分都执行一次命令。
  * `-：`代表连续的时间范围。比如“0 5 * * 1-6命令”，代表在周一到周六的凌晨5点0分执行命令。
  * `/n：`代表每隔多久执行一次。比如“*/10 \* * * * 命令”，代表每隔10分钟就执行一遍命令。

# Linux磁盘分区、挂载度

## 1. 分区方式

* mbr分区
  * 最多支持四个主分区
  * 系统只能安装在主分区
  * 扩展分区要占一个主分区
  * MBR最大只支持2TB，但拥有最好的兼容性
* gpt分区
  * 支持无限多个主分区（但操作系统可能限制，比如windows下最多128个分区）
  * 最大支持18EB的大容量（1EB=1024PB，PB=1024TB）
  * windows7 64位以后支持gpt

## 2. Linux分区

### 2.1 分区原理

* Linux来说无论有几个分区，分给哪一个目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构，Linux中每个分区都是用来组成整个文件系统的一部分。
* Linux采用了一种叫做“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。
  ![3.8Linux分区原理](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:22.jpg)

### 2.2 硬盘说明

* Linux硬盘分IDE硬盘和SCSI硬盘，目前基本上是SCSI硬盘
* lsblk [-f]：查看当前系统的分区和挂载情况。（list block）

### 3. 挂载硬盘

>需求是给我们的Linux系统增加一个新的硬盘，并且挂载到/home/newdisk

1. 添加硬盘
2. 分区：fdsk /dev/sdb
3. 格式化：mkfs -t ext4 /dev/sdb1
4. 挂载：新建目录：mkdir /home/newdisk；挂载：mount /dev/sdb1 /home/newdisk
5. 设置可以自动挂载（永久挂载）：重启系统后，仍然可以挂载。vim etc/fstab 增加挂载信息。mount -a：生效

### 3.1 具体步骤

#### 3.1.1 增加硬盘

![3.8增加硬盘.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:22.jpg)

#### 3.1.2 硬盘分区

![3.8硬盘分区.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:23.jpg)

#### 3.1.3 格式化磁盘

![3.8格式化磁盘.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:24.jpg)

#### 3.1.4 挂载硬盘

![3.8格式化磁盘.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:24.jpg)

#### 3.1.5 永久挂载

![3.8格式化磁盘.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:24.jpg)

### 3.2 取消挂载

* 取消挂载：unmount /dev/sdb1

## 4. 磁盘状况查询

* 磁盘情况查询：df -h / df -l

>实例

![3.8查询系统磁盘](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:25.jpg)

* 查询指定目录的磁盘占用情况：du -h /目录，默认为当前目录
  * -s：指定目录占用大小汇总
  * -h：带计量单位
  * -a：含文件
  * –max-depth=1：子目录深度
  * -c：列出明细的同时，增加汇总值

>实例

![3.8查询指定目录](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:25.jpg)

* 磁盘情况-工作实用指令
  * 统计/home文件夹下文件的个数：ls -l /home | grep "^-" | wc -l
  * 统计/home文件夹下目录的个数：ls -l /home | grep "^d" | wc -l
  * 统计/home文件夹下文件的个数，包括子文件夹里的：ls -lR /home | grep "^-" | wc -l
  * 统计文件夹下目录的个数，包括子文件夹里的：ls -lR /home | grep "^d" | wc -l
  * 以树状显示目录结构：首先安装tree指令：yum install tree，tree

> 实例

![3.8工作实用指令1](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:26.jpg)
![3.8工作实用指令1.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:26.jpg)

# 网络配置

## 1 Linux网络配置原理

> 虚拟机NAT网络配置原理

![虚拟机NAT网络配置原理](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:27.jpg)

## 2 查看网络IP和网关

### 2.1 虚拟机网络编辑器

![3.9虚拟机网络编辑器.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:27.jpg)

### 2.2 修改IP地址

![修改IP地址](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:28.jpg)

### 2.3 查看网关

![查看网关](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:28.jpg)

### 2.4 查看windows中的虚拟网卡的ip地址

* windows中使用ipconfig查看ip配置

## 3. ping测试

> 基本语法: ping [主机地址]

* 例如： ping www.baidu.com

## 4. Linux网络环境配置

### 4.1 自动抓取

![自动抓取自动抓取](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:29.jpg)

**`缺点：`** 每次自动获取的ip地址可能不一样，不适用于做服务器

### 4.2 指定ip地址

1. 直接修改配置文件来指定IP，并可以连接到外网，编辑：vim /etc/sysconfig/network-scripts/ifcfg-eth0
   ![指定ip地址](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:29.jpg)
2. 重启网络服务：service network restart
3. 重启系统：reboot
   ![3.9ifcfg-eth0说明](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:30.jpg)

# 包管理工具

## 1. RPM包

> RPM：RedHat Package Manager，红帽软件包管理工具。
> Linuxd分发版本都有采用（suse,redhat，centos等）

### 1.1 rpm指令

#### 1.1.1 查看指令

* RPM查询已安装的rpm列表：rpm -qa | grep xx
  * 查看是否安装firefox：rpm -qa |grep firefox
    ![3.11rpm查询结果.jpg](https://img.herrluk.icu/typoraPicture/2022-12-01-19:35:30.jpg)
  * 如果是i686,i386表示32位系统，noarch表示通用
* rpm -qa：查询所安装的所有rpm软件包
* rpm -qa | more
* rpm -qa | grep xx
* rpm -q xx：查询xx软件包是否安装
* rpm -qi xx：查询软件包信息
* rpm -ql xx：查询软件包中的文件
* rpm -qf 文件全路径名：查询文件所属的软件包

#### 1.1.2 卸载指令

* 卸载rpm包：rpm -e 软件包名称
* 如果其他软件依赖于要卸载的包，删除时可能会发生依赖错误
* 忽视依赖强制删除的方法：rpm -e --nodeps 软件包名称 可以强制删除，但不建议这样做，否则会导致程序无法运行

#### 1.1.3安装指令

* 安装rpm包：rpm -ivh 软件包全路径名称
  * i=install：安装
  * v=verbose：提示
  * h=hash：进度条

## 2. YUM

> yum（ Yellow dog Updater, Modified）是一个在Fedora和RedHat以及SUSE中的Shell前端软件包管理器。
> 基於RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。

* yum list | grep xx：查询yum服务器是否有需要安装的软件
* yum install xx：安装指定的yum包
* yum -y remove xx：卸载指定的yum包

# 压缩命令

不管是在 Linux 还是其他操作系统中，关于数据的压缩和解压缩操作是经常被用到的。由于在 windows 平台文件的相关操作被傻瓜化了，到了 Linux 平台让好多小伙伴感觉有点束手无策，本篇文章中主要为大家讲解基于 Linux 的常用压缩包操作，格式包含：tar.gz, .tgz, .tar.bz2, .zip, .rar, .tar.xz。

## tar

在 Linux 操作系统中默认自带两个原始的压缩工具分别是 gzip 和 bzip2, 但是它们都有先天的缺陷，不能打包压缩文件, 每个文件都会生成一个单独的压缩包, 并且压缩之后不会保留原文件， 这是一件叔能忍婶也不能忍的事情。

Linux 中自带一个打包工具，叫做 tar, 默认情况下该工具是不能进行压缩操作的，在这种情况下 tar 和 gzip, bzip2 就联姻了，各自发挥各自的优势，Linux 下最强大的打包压缩工具至此诞生。

我们在使用 tar 进行压缩和解压缩的时候，只需要指定相对用的参数，在其内部就会调用对应的压缩工具 gzip 或者 bzip2 完成指定的操作。

###  压缩 (.tar.gz .tar.bz2 .tgz)

如果使用 tar 完成文件压缩，涉及的参数如下，在使用过程中参数没有先后顺序:（不用加 `-`）

```
c: 创建压缩文件
z: 使用 gzip 的方式进行文件压缩
j: 使用 bzip2 的方式进行文件压缩
v: 压缩过程中显示压缩信息，可以省略不写
f: 指定压缩包的名字
```

一般认为 .tgz 文件就等同于 .tar.gz 文件，因此它们的压缩方式是相同的。

```shell
# 语法: 
$ tar 参数 生成的压缩包的名字 要压缩的文件(文件或者目录)

# 备注: 关于生成的压缩包的名字, 建议使用标准后缀, 方便识别:
	- 压缩使用 gzip 方式,  标准后缀格式为: .tar.gz
	- 压缩使用 bzip2 方式, 标准后缀格式为: .tar.bz2	
```

举例：使用 gzip 的方式进行文件压缩

```shell
# 压缩目录中所有文件, 如果要压缩某几个文件, 直接指定文件名即可
$ tar zcvf all.tar.gz *
get/                     # ....... 压缩信息
get/link.lnk             # ....... 压缩信息
get/onepiece/            # ....... 压缩信息
get/onepiece/haha.txt
get/link.txt
onepiece.txt
robin.txt

# 查看目录文件, 多了一个压缩文件 all.tar.gz
```

### 解压缩 (.tar.gz .tar.bz2 .tgz) 

如果使用 tar 进行文件的解压缩，涉及的参数如下，在使用过程中参数没有先后顺序:  

`x`: 释放压缩文件内容 z: 使用 gzip 的方式进行文件压缩，压缩包后缀为.tar.gz 

`j`: 使用 bzip2 的方式进行文件压缩，压缩包后缀为.tar.bz2 

`v`: 解压缩过程中显示解压缩信息 

`f`: 指定压缩包的名字 

使用以上参数是将压缩包解压到当前目录，如果需要解压到指定目录，需要指定参数 `-C`。 一般认为 .tgz 文件就等同于 .tar.gz 文件，解压缩方式是相同的。解压的语法格式如下:  

```
# 语法1: 解压到当前目录中
$ tar 参数 压缩包名 

# 语法2: 解压到指定目录中
$ tar 参数 压缩包名 -C 解压目录
```

举例：使用 gzip 的方式进行文件解压缩

```
# 将 all.tar.gz 压缩包解压缩到 temp 目录中
$ tar zxvf all.tar.gz -C temp
get/                      # 解压缩文件信息
get/link.lnk              # 解压缩文件信息
get/onepiece/             # 解压缩文件信息
get/onepiece/haha.txt     # 解压缩文件信息
get/link.txt
onepiece.txt
robin.txt

# 查看temp目录内容, 都是从压缩包中释放出来的
```

## zip

zip 格式的压缩包在 Linux 中也是很常见的，在某些版本中需要安装才能使用。

Ubuntu:

```
$ sudo apt install zip    	# 压缩
$ sudo apt install unzip	# 解压缩
```

CentOS:

```
# 因为 centos 可以使用 root 用户登录, 基于 root 用户安装软件, 不需要加 sudo
$ sudo yum install zip    	# 压缩
$ sudo yum install unzip	# 解压缩
```

### 压缩 (.zip)

使用 zip 压缩目录需要注意一点，*必须要添加参数 -r, 这样才能将子目录中的文件一并压缩，如果要压缩的文件中没有目录，该参数就可以不写了。*

另外使用 zip 压缩文件，会自动生成文件后缀.zip, 因此就不需要额外指定了。

```
# 语法: 后自动添加压缩包后缀 .zip, 如果要压缩目录, 需要添加参数 r
$ zip [-r]  压缩包名 要压缩的文件

# 压缩目录 get 和文件 onepiece.txt robin.txt 得到压缩包 all.zip(不需要指定后缀, 自动添加)
$ zip all onepiece.txt robin.txt get/ -r
```

### 解压缩(.zip)

对应 zip 格式的文件解压缩，必须要使用 unzip 命令，和压缩的时候使用的命令是不一样的。如果压缩包中的文件要解压到指定目录需要指定参数 -d, 默认是解压缩到当前目录中。

```
# 语法1: 解压到当前目录中 
$ unzip 压缩包名

# 语法: 解压到指定目录, 需要添加参数 -d
$ unzip 压缩包名 -d 解压目录

# 将 all.zip 解压缩到 temp 目录中
$ unzip all.zip -d temp/
```

